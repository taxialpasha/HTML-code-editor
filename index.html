<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محرر الأكواد والخادم المحلي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-language_tools.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ext-beautify.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- شريط الأدوات العلوي -->
    <div class="header">
        <div class="toggle-sidebar">
            <i class="fas fa-bars"></i>
        </div>
        <h1>محرر الأكواد والخادم المحلي</h1>

        <div class="server-status" id="server-status">
            <i class="fas fa-circle"></i>
            الخادم: غير نشط
        </div>

        <div class="header-buttons">
            <button class="run-button" id="run-button">
                <i class="fas fa-play"></i>
                تشغيل
            </button>
            <button class="save-button" id="save-button">
                <i class="fas fa-save"></i>
                حفظ
            </button>
            <button class="format-button" id="format-button">
                <i class="fas fa-align-left"></i>
                تنسيق
            </button>
            <button class="upload-button">
                <i class="fas fa-upload"></i>
                رفع ملفات
            </button>
            <button class="export-button" id="export-button">
                <i class="fas fa-file-export"></i>
                تصدير المشروع
            </button>
            <button class="theme-toggle" id="theme-toggle">
                <i class="fas fa-moon"></i>
                وضع مظلم
            </button>
        </div>
    </div>

    <!-- الحاوية الرئيسية -->
    <div class="main-container">
        <!-- القائمة الجانبية -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">مستكشف الملفات</div>
                <div class="sidebar-controls">
                    <div class="new-file-btn" title="ملف جديد">
                        <i class="fas fa-file-plus"></i>
                    </div>
                    <div class="new-folder-btn" title="مجلد جديد">
                        <i class="fas fa-folder-plus"></i>
                    </div>
                    <div class="refresh-btn" title="تحديث">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                </div>
            </div>
            <div class="file-browser" id="file-browser">
                <!-- هنا ستظهر الملفات والمجلدات -->
            </div>
            
            <!-- قسم المفضلة والقوالب -->
            <div class="snippets-section">
                <div class="sidebar-section-header">
                    <div class="section-title">قوالب جاهزة</div>
                    <div class="section-toggle">
                        <i class="fas fa-chevron-down"></i>
                    </div>
                </div>
                <div class="snippets-list">
                    <div class="snippet-item" data-snippet="html-template">
                        <i class="fab fa-html5"></i> قالب HTML
                    </div>
                    <div class="snippet-item" data-snippet="css-reset">
                        <i class="fab fa-css3-alt"></i> CSS Reset
                    </div>
                    <div class="snippet-item" data-snippet="responsive-layout">
                        <i class="fas fa-mobile-alt"></i> تخطيط متجاوب
                    </div>
                    <div class="snippet-item" data-snippet="flex-grid">
                        <i class="fas fa-th"></i> شبكة Flex
                    </div>
                    <div class="snippet-item" data-snippet="js-dom">
                        <i class="fab fa-js"></i> DOM تفاعلي
                    </div>
                </div>
            </div>
            
            <!-- إحصاءات المشروع -->
            <div class="project-stats" id="project-stats">
                <div class="stats-header">إحصاءات المشروع</div>
                <div class="stats-content">
                    <div class="stat-item">
                        <div class="stat-label">عدد الملفات:</div>
                        <div class="stat-value" id="files-count">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">عدد المجلدات:</div>
                        <div class="stat-value" id="folders-count">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">حجم المشروع:</div>
                        <div class="stat-value" id="project-size">0 KB</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- منطقة المحتوى -->
        <div class="content-area">
            <!-- شريط التبويبات -->
            <div class="tabs" id="tabs">
                <!-- الألسنة ستضاف هنا باستخدام جافا سكريبت -->
            </div>

            <!-- شريط البحث -->
            <div class="search-bar" id="search-bar">
                <div class="search-input-container">
                    <input type="text" id="search-input" placeholder="بحث...">
                    <input type="text" id="replace-input" placeholder="استبدال بـ...">
                </div>
                <div class="search-buttons">
                    <button id="search-prev" title="السابق">
                        <i class="fas fa-arrow-up"></i>
                    </button>
                    <button id="search-next" title="التالي">
                        <i class="fas fa-arrow-down"></i>
                    </button>
                    <button id="replace-btn" title="استبدال">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                    <button id="replace-all-btn" title="استبدال الكل">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="close-search" title="إغلاق">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- حاوية المحرر -->
            <div class="editor-container" id="editor-container">
                <div class="no-file-opened">
                    <i class="fas fa-code"></i>
                    <h2>مرحباً بك في محرر الأكواد والخادم المحلي</h2>
                    <p>قم بإنشاء ملف جديد أو افتح ملفاً موجوداً من شريط المستكشف الجانبي للبدء. يمكنك أيضاً رفع ملفات من جهازك باستخدام زر "رفع ملفات".</p>
                    <div class="quick-actions">
                        <button class="quick-action-btn" data-action="new-html">
                            <i class="fab fa-html5"></i>
                            ملف HTML جديد
                        </button>
                        <button class="quick-action-btn" data-action="new-css">
                            <i class="fab fa-css3-alt"></i>
                            ملف CSS جديد
                        </button>
                        <button class="quick-action-btn" data-action="new-js">
                            <i class="fab fa-js"></i>
                            ملف JavaScript جديد
                        </button>
                        <button class="quick-action-btn" data-action="upload">
                            <i class="fas fa-upload"></i>
                            رفع ملفات
                        </button>
                    </div>
                </div>
                <div id="editor" style="display: none;"></div>
                <div class="editor-overlay" id="editor-overlay">
                    <div class="autosave-notification">
                        <i class="fas fa-save"></i> تم الحفظ تلقائياً
                    </div>
                </div>
                <div id="live-preview" class="live-preview"></div>
            </div>

            <!-- حاوية المعاينة -->
            <div class="preview-container" id="preview-container">
                <iframe id="preview-iframe"></iframe>
                <div class="preview-controls">
                    <button id="preview-refresh" title="تحديث">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <button id="preview-back" title="العودة للمحرر">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <button id="preview-console" title="إظهار وحدة التحكم">
                        <i class="fas fa-terminal"></i>
                    </button>
                    <select id="preview-device">
                        <option value="responsive">تفاعلي</option>
                        <option value="desktop">سطح المكتب (1920×1080)</option>
                        <option value="laptop">حاسوب محمول (1366×768)</option>
                        <option value="tablet">جهاز لوحي (768×1024)</option>
                        <option value="mobile">هاتف ذكي (375×667)</option>
                    </select>
                </div>
            </div>

            <!-- شريط الحالة -->
            <div class="status-bar">
                <span id="cursor-position">السطر: 1، العمود: 1</span>
                <span class="language" id="language-indicator">لغة: لم يتم تحديدها</span>
                <span class="encoding">UTF-8</span>
                <span class="autosave-status" id="autosave-status">حفظ تلقائي: مفعل</span>
                <div class="editor-controls">
                    <select id="editor-theme" title="سمة المحرر">
                        <option value="monokai">Monokai</option>
                        <option value="github">GitHub</option>
                        <option value="tomorrow_night">Tomorrow Night</option>
                        <option value="solarized_dark">Solarized Dark</option>
                        <option value="solarized_light">Solarized Light</option>
                        <option value="twilight">Twilight</option>
                        <option value="terminal">Terminal</option>
                    </select>
                    <select id="editor-font-size" title="حجم الخط">
                        <option value="12px">12px</option>
                        <option value="14px" selected>14px</option>
                        <option value="16px">16px</option>
                        <option value="18px">18px</option>
                        <option value="20px">20px</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <!-- وحدة التحكم للتطبيق -->
    <div class="console-container" id="console-container">
        <div class="console-header">
            <h3>وحدة التحكم</h3>
            <div class="console-buttons">
                <button class="console-button console-clear" id="console-clear">
                    <i class="fas fa-trash"></i> مسح
                </button>
                <button class="console-button console-close" id="console-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="console-content" id="console-content">
            <!-- هنا ستظهر سجلات وحدة التحكم -->
        </div>
    </div>

    <!-- مودال إنشاء ملف جديد -->
    <div class="modal" id="new-file-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>إنشاء ملف جديد</h2>
                <i class="fas fa-times close-modal"></i>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="new-file-name">اسم الملف:</label>
                    <input type="text" id="new-file-name" class="form-control" placeholder="مثال: index.html">
                </div>
                <div class="form-group">
                    <label for="new-file-type">نوع الملف:</label>
                    <select id="new-file-type" class="form-control">
                        <option value="html">HTML</option>
                        <option value="css">CSS</option>
                        <option value="js">JavaScript</option>
                        <option value="json">JSON</option>
                        <option value="txt">نص عادي</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="new-file-template">استخدام قالب:</label>
                    <select id="new-file-template" class="form-control">
                        <option value="empty">بدون قالب</option>
                        <option value="basic">قالب أساسي</option>
                        <option value="full">قالب كامل</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button cancel close-modal">إلغاء</button>
                <button class="modal-button primary" id="create-file-btn">إنشاء</button>
            </div>
        </div>
    </div>

    <!-- مودال إنشاء مجلد جديد -->
    <div class="modal" id="new-folder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>إنشاء مجلد جديد</h2>
                <i class="fas fa-times close-modal"></i>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="new-folder-name">اسم المجلد:</label>
                    <input type="text" id="new-folder-name" class="form-control" placeholder="مثال: مجلد جديد">
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button cancel close-modal">إلغاء</button>
                <button class="modal-button primary" id="create-folder-btn">إنشاء</button>
            </div>
        </div>
    </div>

    <!-- مودال رفع ملف -->
    <div class="modal" id="upload-file-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>رفع ملف</h2>
                <i class="fas fa-times close-modal"></i>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="upload-file-input" class="file-input-label">
                        <i class="fas fa-cloud-upload-alt"></i> اختر ملفاً أو اسحبه هنا
                    </label>
                    <input type="file" id="upload-file-input" multiple>
                </div>
                <div class="upload-destination">
                    <label>المجلد الوجهة:</label>
                    <div id="upload-destination-path">المجلد الرئيسي</div>
                    <button id="change-destination">تغيير</button>
                </div>
                <div id="upload-file-list"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-button cancel close-modal">إلغاء</button>
                <button class="modal-button primary" id="upload-files-btn">رفع</button>
            </div>
        </div>
    </div>

    <!-- مودال تصدير المشروع -->
    <div class="modal" id="export-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>تصدير المشروع</h2>
                <i class="fas fa-times close-modal"></i>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>اسم الملف المضغوط:</label>
                    <input type="text" id="export-file-name" class="form-control" value="my-project.zip">
                </div>
                <div class="form-group">
                    <label>خيارات التصدير:</label>
                    <div class="checkbox-group">
                        <input type="checkbox" id="export-include-all" checked>
                        <label for="export-include-all">تضمين جميع الملفات والمجلدات</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="export-minify">
                        <label for="export-minify">تصغير ملفات CSS و JavaScript</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button cancel close-modal">إلغاء</button>
                <button class="modal-button primary" id="export-project-btn">تصدير</button>
            </div>
        </div>
    </div>

    <!-- مودال اختيار مجلد الوجهة -->
    <div class="modal" id="folder-select-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>اختر المجلد الوجهة</h2>
                <i class="fas fa-times close-modal"></i>
            </div>
            <div class="modal-body">
                <div class="folder-tree" id="folder-tree">
                    <!-- هنا ستظهر شجرة المجلدات -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-button cancel close-modal">إلغاء</button>
                <button class="modal-button primary" id="select-folder-btn">اختيار</button>
            </div>
        </div>
    </div>

    <!-- قائمة السياق -->
    <div class="context-menu" id="context-menu">
        <div class="context-menu-item" data-action="new-file">
            <i class="fas fa-file"></i>
            ملف جديد
        </div>
        <div class="context-menu-item" data-action="new-folder">
            <i class="fas fa-folder"></i>
            مجلد جديد
        </div>
        <div class="context-menu-item" data-action="rename">
            <i class="fas fa-edit"></i>
            إعادة تسمية
        </div>
        <div class="context-menu-item" data-action="duplicate">
            <i class="fas fa-copy"></i>
            نسخ
        </div>
        <div class="context-menu-item" data-action="delete">
            <i class="fas fa-trash-alt"></i>
            حذف
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="copy-path">
            <i class="fas fa-clipboard"></i>
            نسخ المسار
        </div>
        <div class="context-menu-item" data-action="download">
            <i class="fas fa-download"></i>
            تنزيل
        </div>
    </div>

    <!-- قائمة سياق المحرر -->
    <div class="editor-context-menu" id="editor-context-menu">
        <div class="context-menu-item" data-action="cut">
            <i class="fas fa-cut"></i>
            قص
        </div>
        <div class="context-menu-item" data-action="copy">
            <i class="fas fa-copy"></i>
            نسخ
        </div>
        <div class="context-menu-item" data-action="paste">
            <i class="fas fa-paste"></i>
            لصق
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="select-all">
            <i class="fas fa-check-double"></i>
            تحديد الكل
        </div>
        <div class="context-menu-item" data-action="find">
            <i class="fas fa-search"></i>
            بحث
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="format-code">
            <i class="fas fa-align-left"></i>
            تنسيق الكود
        </div>
    </div>

    <!-- التنبيه -->
    <div class="toast-container" id="toast-container">
        <!-- ستضاف التنبيهات هنا -->
    </div>

    <script src="script.js"></script>
</body>
</html>
